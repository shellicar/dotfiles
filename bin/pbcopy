#!/bin/sh

input=$(cat)
[ "$input" = "" ] && exit 0

detected_os=$(dirname "$0")/../get-os.sh

case $($detected_os) in
    windows-bash)
        printf "%s" "$input" | clip.exe
        ;;
    wsl)
        printf "%s" "$input" | clip.exe
        ;;
    macos)
        printf "%s" "$input" | /usr/bin/pbcopy
        ;;
    linux)
        if command -v xclip >/dev/null; then
            printf "%s" "$input" | xclip -selection clipboard
        elif command -v xsel >/dev/null; then
            printf "%s" "$input" | xsel --clipboard --input
        else
            echo "No clipboard utility found" >&2
            exit 1
        fi
        ;;
esac
